<div *ngIf="gotIt" class="got-user">GOT IT</div>

<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      User
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

    <form [formGroup]="form" (ngSubmit)="submitForm(form)">
      <ion-grid>
        <ion-row color="primary" justify-content-center>
          <ion-col align-self-center size-xs="6" size-sm="5" size-md="4" size-lg="3">
            <div padding>
              <ion-item>
                <ion-input name="email" type="email" placeholder="your@email.com" required [ngClass]="{'red': invalidCreds}" autocomplete="off" formControlName="email" (input)="eraseErrors()"></ion-input>
              </ion-item>
              <ion-item>
                <ion-input name="password" type="password" placeholder="Password" required [ngClass]="{'red': invalidCreds}" autocomplete="off" formControlName="password" (input)="eraseErrors()"></ion-input>
              </ion-item>
            </div>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col>
            <ion-button color="primary"
              *ngIf="!isReadOnly"
              type="submit"
              [disabled]="!form.valid"
            >
              Submit
            </ion-button>

            <ion-button color="primary"
              *ngIf="isReadOnly && (sessionService.currentUser?.can('update', 'User') || sessionService.currentUser?.can('update', 'profile'))"
              (click)="enableForm()"
            >
              Edit
            </ion-button>

            <ion-button color="accent"
              *ngIf="!isReadOnly"
              (click)="cancel()"
            >
              Cancel
            </ion-button>

            <ion-button color="warn"
              *ngIf="isReadOnly && sessionService.currentUser?.can('destroy', 'User')"
              (click)="delete($event)"
            >
              Delete
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>

</ion-content>
